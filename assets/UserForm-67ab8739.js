import{z as t,d as P,t as F,j as a,a as s,M as o}from"./index-505097af.js";const b={password:/^((\w+[?#&$!+|-]+)|([?#&$!+|-]+\w+)).+$/},x=t.object({username:t.string().min(5,"Username field must contain at least five characters").nonempty("Username field is required"),password:t.string().nonempty("Password field is required").min(8,"Password field must contain at least eight characters").regex(b.password,"Password is too weak, include characters (e.g ?#&$!+|-)")});const y={username:"",password:"",confirmPassword:""};function U({mode:d,mutate:c}){const{register:n,formState:{errors:r,dirtyFields:i},setError:p,watch:m,handleSubmit:w}=P({mode:"onChange",defaultValues:y,resolver:F(x),shouldFocusError:!0}),l=e=>{const{value:u}=e.target,h=m("password"),g=m("confirmPassword");d==="signup"&&(u!==h||u!==g)&&p("confirmPassword",{type:"manual",message:"Passwords don't match"})},f=e=>{c(e)};return a("form",{className:"user-form",onSubmit:e=>void w(f)(e),children:[a("div",{className:"form-group",children:[s("label",{htmlFor:"username",children:"Username"}),s("input",{type:"text",...n("username",{required:!0}),id:"username"}),r.username&&s(o,{text:r.username.message,kind:"error"})]}),a("div",{className:"form-group",children:[s("label",{htmlFor:"password",children:"Password"}),s("input",{type:"password",...n("password",{required:!0,onBlur:l}),id:"password"}),r.password&&s(o,{text:r.password.message,kind:"error"})]}),d==="signup"&&a("div",{className:"form-group",children:[s("label",{htmlFor:"confirm-password",children:"Confirm password"}),s("input",{type:"password",...n("confirmPassword",{required:!1,onBlur:l}),id:"confirm-password"}),r.confirmPassword&&s(o,{text:r.confirmPassword.message,kind:"error"})]}),!(r.username||r.password||r.confirmPassword)&&i.password&&i.username?s("input",{type:"submit",className:"button",value:"Send"}):s(o,{text:"Fill all the fields correctly, please",kind:"warning"})]})}export{U};
